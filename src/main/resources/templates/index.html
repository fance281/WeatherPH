<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8" />
    <title>WeatherPH Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Mapbox GL JS -->
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.css" rel="stylesheet" />
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.js"></script>
    <!-- Mapbox Geocoder -->
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css" type="text/css" />
    
    <link th:href="@{/assets/css/styles.css}" rel="stylesheet" />
</head>
<body class="dashboard-body">

<div class="dashboard-container">
    <!-- Sidebar Fragment -->
    <div th:replace="~{fragments/sidebar :: sidebar}"></div>

    <main class="main-content">
        <div class="main-header">
            <div class="location-display">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="location-icon"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                <h2 id="location-name">Loading location...</h2>
            </div>
            <div id="geocoder" class="geocoder"></div>
        </div>

        <div class="top-grid">
            <div class="map-container">
                <div id="map"></div>
                <div class="map-style-selector">
                    <button class="map-style-btn active" data-style="mapbox://styles/mapbox/dark-v10">Dark</button>
                    <button class="map-style-btn" data-style="mapbox://styles/mapbox/streets-v11">Streets</button>
                    <button class="map-style-btn" data-style="mapbox://styles/mapbox/satellite-streets-v11">Satellite</button>
                </div>
            </div>
            <div class="current-weather-details" id="current-weather-content">
                <!-- Current weather will be loaded here by JavaScript -->
                <p>Loading current weather...</p>
            </div>
        </div>

        <div class="forecast-section">
            <div class="forecast-header">
                <h3>Forecast</h3>
                <div class="forecast-toggle">
                    <button class="forecast-toggle-btn active" data-forecast="hourly">24 hours forecast</button>
                    <button class="forecast-toggle-btn" data-forecast="daily">7 days forecast</button>
                </div>
            </div>
            <div id="forecast-content">
                <div class="hourly-forecast-table-container" id="hourly-forecast">
                    <!-- Hourly forecast table will be loaded here -->
                    <p>Loading hourly forecast...</p>
                </div>
                <div class="daily-forecast-container" id="daily-forecast" style="display: none;">
                    <!-- Daily forecast will be loaded here -->
                    <p>Loading 7-day forecast...</p>
                </div>
            </div>
        </div>

    </main>
</div>

<!-- Logout Modal Fragment -->
<div th:replace="~{fragments/sidebar :: logout-modal}"></div>

<script th:src="@{/assets/js/app.js}"></script>
<script th:src="@{/assets/js/dashboard.js}"></script>

</body>
</html>
